{"ast":null,"code":"var _jsxFileName = \"/Users/motidahari/projects/inventoryProject/client/src/Pages/Logs/LogsPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { AuthContext } from '../../context/auth';\nimport { useForm } from '../../hooks/useForm';\nimport { Box, Button, MenuItem, TextField, Typography, Grid, ListSubheader } from '@mui/material';\nimport LogsTable from './LogsTable';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport PageContainer from '../../components/PageContainer';\nimport { useFetchData } from '../../hooks/useFetchData';\nimport locations from '../../requests/locations';\nimport logs from '../../requests/logs';\nimport Banner from '../../components/Banner'; //csv\n\nimport { ExportDataContext } from './../../context/DataExport';\nimport { CSVLink } from 'react-csv';\nimport TextFieldSelect from '../../components/TextFieldSelect';\nimport { PageHeaderContainer } from '../../styles/styledComponents';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LogsPage = () => {\n  _s();\n\n  const [warehouse, setWarehouse] = useState('');\n  const [country, setCountry] = useState('');\n  const {\n    headers,\n    fileName,\n    data,\n    changeDataExport\n  } = useContext(ExportDataContext);\n  const {\n    state: allCountries\n  } = useFetchData(locations.getAllCountries);\n  const {\n    state: allLocations,\n    setState: setLocationState\n  } = useFetchData(locations.getAllLocations);\n  const {\n    state: allLogs,\n    error,\n    setState\n  } = useFetchData(logs.GetAllLogsProducts); // console.log('allLogs', allLogs);\n\n  const {\n    user,\n    token\n  } = useContext(AuthContext);\n  const userAction = {\n    userId: user.id,\n    token: token\n  };\n\n  const getLocationByCountry = async countryId => {\n    const country = {\n      countryId: countryId\n    }; // console.log('country', country);\n\n    const result = await locations.getLocationsByCountryId(userAction, country);\n\n    if (result.length > 0) {\n      setLocationState(result);\n    } else {\n      setLocationState([]);\n    }\n  };\n\n  useEffect(() => {\n    if (country.length !== 0) {\n      getLocationByCountry(country);\n    }\n  }, [country]);\n  const {\n    onChange,\n    onSubmit,\n    setFieldValue,\n    values\n  } = useForm(searchCallback, {\n    locationId: '',\n    countryId: '',\n    search: ''\n  });\n\n  const searchLogs = async () => {\n    // console.log('search logs values', values);\n    const resultGetAllProductsBySearch = await logs.GetAllLogsProductsParams(userAction, values);\n    setState(resultGetAllProductsBySearch); // console.log('resultGetAllProductsBySearch', resultGetAllProductsBySearch);\n  };\n\n  function searchCallback() {\n    searchLogs();\n  }\n\n  useEffect(() => {\n    changeDataExport('Logs', allLogs);\n  }, [allLogs]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(PageContainer, {\n      children: [/*#__PURE__*/_jsxDEV(PageHeaderContainer, {\n        children: [country ? /*#__PURE__*/_jsxDEV(Banner, {\n          country: country\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 22\n        }, this) : /*#__PURE__*/_jsxDEV(Banner, {\n          country: ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 53\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          sx: {\n            m: 1\n          },\n          variant: \"h4\",\n          children: \"Logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            m: 1\n          },\n          children: fileName && headers && data ? /*#__PURE__*/_jsxDEV(CSVLink, {\n            style: {\n              textDecoration: 'none',\n              color: '#3F3FBE'\n            },\n            filename: fileName,\n            data: data,\n            headers: headers,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"secondary\",\n              startIcon: /*#__PURE__*/_jsxDEV(DownloadIcon, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 30\n              }, this),\n              sx: {\n                mr: 1\n              },\n              children: \"Export To Excel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 5,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              label: \"Search Product\",\n              onChange: onChange,\n              value: values.search,\n              variant: \"outlined\",\n              name: \"search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            children: /*#__PURE__*/_jsxDEV(TextFieldSelect, {\n              value: country,\n              onChange: event => {\n                setFieldValue('countryId', event.target.value);\n                setCountry(event.target.value);\n              },\n              label: 'Select country',\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"\",\n                children: \"None\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListSubheader, {\n                children: \"Select Country\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this), allCountries ? allCountries.map(country => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: country.countryId,\n                children: country.countryName\n              }, country.countryId, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this)) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            children: /*#__PURE__*/_jsxDEV(TextFieldSelect, {\n              value: warehouse,\n              onChange: event => {\n                setFieldValue('locationId', event.target.value);\n                setWarehouse(event.target.value);\n              },\n              label: 'Select Location',\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"\",\n                children: \"None\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListSubheader, {\n                children: \"Select Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this), allLocations ? allLocations.map(location => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: location.locationId,\n                children: location.locationName\n              }, location.locationId, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 21\n              }, this)) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            sx: {\n              alignSelf: 'center'\n            },\n            item: true,\n            xs: 1,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              color: \"secondary\",\n              variant: \"outlined\",\n              onClick: onSubmit,\n              sx: {\n                p: '14px'\n              },\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(LogsTable, {\n          allLogs: allLogs,\n          error: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(LogsPage, \"cMJ4TPlnXA9jykSBdbmPHA8IvFg=\", false, function () {\n  return [useFetchData, useFetchData, useFetchData, useForm];\n});\n\n_c = LogsPage;\nexport default LogsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LogsPage\");","map":{"version":3,"sources":["/Users/motidahari/projects/inventoryProject/client/src/Pages/Logs/LogsPage.jsx"],"names":["React","useState","useContext","useEffect","AuthContext","useForm","Box","Button","MenuItem","TextField","Typography","Grid","ListSubheader","LogsTable","DownloadIcon","PageContainer","useFetchData","locations","logs","Banner","ExportDataContext","CSVLink","TextFieldSelect","PageHeaderContainer","LogsPage","warehouse","setWarehouse","country","setCountry","headers","fileName","data","changeDataExport","state","allCountries","getAllCountries","allLocations","setState","setLocationState","getAllLocations","allLogs","error","GetAllLogsProducts","user","token","userAction","userId","id","getLocationByCountry","countryId","result","getLocationsByCountryId","length","onChange","onSubmit","setFieldValue","values","searchCallback","locationId","search","searchLogs","resultGetAllProductsBySearch","GetAllLogsProductsParams","m","textDecoration","color","mr","mt","event","target","value","map","countryName","location","locationName","alignSelf","p"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { AuthContext } from '../../context/auth';\nimport { useForm } from '../../hooks/useForm';\nimport {\n  Box,\n  Button,\n  MenuItem,\n  TextField,\n  Typography,\n  Grid,\n  ListSubheader,\n} from '@mui/material';\nimport LogsTable from './LogsTable';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport PageContainer from '../../components/PageContainer';\nimport { useFetchData } from '../../hooks/useFetchData';\nimport locations from '../../requests/locations';\nimport logs from '../../requests/logs';\nimport Banner from '../../components/Banner';\n//csv\nimport { ExportDataContext } from './../../context/DataExport';\nimport { CSVLink } from 'react-csv';\nimport TextFieldSelect from '../../components/TextFieldSelect';\nimport { PageHeaderContainer } from '../../styles/styledComponents';\n\nconst LogsPage = () => {\n  const [warehouse, setWarehouse] = useState('');\n  const [country, setCountry] = useState('');\n  const { headers, fileName, data, changeDataExport } =\n    useContext(ExportDataContext);\n  const { state: allCountries } = useFetchData(locations.getAllCountries);\n  const { state: allLocations, setState: setLocationState } = useFetchData(\n    locations.getAllLocations\n  );\n  const {\n    state: allLogs,\n    error,\n    setState,\n  } = useFetchData(logs.GetAllLogsProducts);\n  // console.log('allLogs', allLogs);\n  const { user, token } = useContext(AuthContext);\n  const userAction = {\n    userId: user.id,\n    token: token,\n  };\n\n  const getLocationByCountry = async countryId => {\n    const country = {\n      countryId: countryId,\n    };\n    // console.log('country', country);\n    const result = await locations.getLocationsByCountryId(userAction, country);\n    if (result.length > 0) {\n      setLocationState(result);\n    } else {\n      setLocationState([]);\n    }\n  };\n\n  useEffect(() => {\n    if (country.length !== 0) {\n      getLocationByCountry(country);\n    }\n  }, [country]);\n\n  const { onChange, onSubmit, setFieldValue, values } = useForm(\n    searchCallback,\n    {\n      locationId: '',\n      countryId: '',\n      search: '',\n    }\n  );\n  const searchLogs = async () => {\n    // console.log('search logs values', values);\n    const resultGetAllProductsBySearch = await logs.GetAllLogsProductsParams(\n      userAction,\n      values\n    );\n    setState(resultGetAllProductsBySearch);\n    // console.log('resultGetAllProductsBySearch', resultGetAllProductsBySearch);\n  };\n\n  function searchCallback() {\n    searchLogs();\n  }\n\n  useEffect(() => {\n    changeDataExport('Logs', allLogs);\n  }, [allLogs]);\n\n  return (\n    <>\n      <PageContainer>\n        <PageHeaderContainer>\n          {country ? <Banner country={country} /> : <Banner country={''} />}\n\n          <Typography sx={{ m: 1 }} variant=\"h4\">\n            Logs\n          </Typography>\n          <Box sx={{ m: 1 }}>\n            {fileName && headers && data ? (\n              <CSVLink\n                style={{ textDecoration: 'none', color: '#3F3FBE' }}\n                filename={fileName}\n                data={data}\n                headers={headers}\n              >\n                <Button\n                  variant=\"outlined\"\n                  color=\"secondary\"\n                  startIcon={<DownloadIcon fontSize=\"small\" />}\n                  sx={{ mr: 1 }}\n                >\n                  Export To Excel\n                </Button>\n              </CSVLink>\n            ) : null}\n          </Box>\n        </PageHeaderContainer>\n\n        <Box sx={{ mt: 3 }}>\n          <Grid container spacing={2}>\n            <Grid item xs={5}>\n              <TextField\n                fullWidth\n                label=\"Search Product\"\n                onChange={onChange}\n                value={values.search}\n                variant=\"outlined\"\n                name=\"search\"\n              />\n            </Grid>\n            <Grid item xs={3}>\n              <TextFieldSelect\n                value={country}\n                onChange={event => {\n                  setFieldValue('countryId', event.target.value);\n                  setCountry(event.target.value);\n                }}\n                label={'Select country'}\n              >\n                <MenuItem value=\"\">None</MenuItem>\n                <ListSubheader>Select Country</ListSubheader>\n                {allCountries\n                  ? allCountries.map(country => (\n                    <MenuItem\n                      key={country.countryId}\n                      value={country.countryId}\n                    >\n                      {country.countryName}\n                    </MenuItem>\n                  ))\n                  : null}\n              </TextFieldSelect>\n            </Grid>\n            <Grid item xs={3}>\n              <TextFieldSelect\n                value={warehouse}\n                onChange={event => {\n                  setFieldValue('locationId', event.target.value);\n                  setWarehouse(event.target.value);\n                }}\n                label={'Select Location'}\n              >\n                <MenuItem value=\"\">None</MenuItem>\n                <ListSubheader>Select Location</ListSubheader>\n                {allLocations\n                  ? allLocations.map(location => (\n                    <MenuItem\n                      key={location.locationId}\n                      value={location.locationId}\n                    >\n                      {location.locationName}\n                    </MenuItem>\n                  ))\n                  : null}\n              </TextFieldSelect>\n            </Grid>\n            <Grid sx={{ alignSelf: 'center' }} item xs={1}>\n              <Button\n                color=\"secondary\"\n                variant=\"outlined\"\n                onClick={onSubmit}\n                sx={{ p: '14px' }}\n              >\n                Search\n              </Button>\n            </Grid>\n          </Grid>\n        </Box>\n\n        <Box sx={{ mt: 3 }}>\n          <LogsTable allLogs={allLogs} error={error} />\n        </Box>\n      </PageContainer>\n    </>\n  );\n};\n\nexport default LogsPage;\n"]},"metadata":{},"sourceType":"module"}